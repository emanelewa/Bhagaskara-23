!function(i){i.fn.bridgeSlide=function(e){var e=i.extend({width:960,visibleItems:4,items:".items",item:".item",itemMargin:"auto",pagination:"#pagination",paginationExtended:!1,paginationPrev:".left",paginationNext:".right",sliderStartAnimate:!0,sliderStartSpeed:800,sliderStartEasing:"linear",sliderSpeed:500,sliderEasing:"linear",keyboardArrows:!0,touch:!0},e);return new t(this,e)};var t=function(i,t){var e=this;e._init(i,t)};t.prototype={config:null,element:null,containerDiv:null,items:null,itemsLength:0,itemWidth:0,pagination:null,paginationClickable:!0,leftHide:0,rightHide:0,firstPos:0,lastPos:null,_init:function(t,e){this.element=t,this.config=e,this.element.css({overflowX:"hidden",overflowY:"visible",position:"relative"}),this.containerDiv=i(document.createElement("div")),this.config.width="100%"==e.width||"auto"==e.width?i(document).width():parseInt(e.width);var n=i(e.items,t);if(this.items=i(e.item,n),this.itemsLength=parseInt(this.items.length),this.element.append(this.containerDiv),n.appendTo(this.containerDiv),this.pagination=i(this.config.pagination,t).length&&this.config.paginationExtended===!1?i(this.config.pagination,t).appendTo(t):i(this.config.pagination),this.containerDiv.css({width:e.width,position:"relative",margin:"0 auto",minHeight:this.items.filter(":visible").first().innerHeight()}),"auto"===e.itemMargin&&(e.itemMargin=parseInt(this.items.first().css("marginLeft"))+parseInt(this.items.first().css("marginRight"))),e.itemMargin=parseInt(e.itemMargin),this.itemsLength<=this.config.visibleItems){i(this.config.paginationPrev+","+this.config.paginationNext,this.pagination).addClass("disabled");var s=0;return this.items.each(function(){i(this).css({marginLeft:s+"px"}),s=e.itemMargin}),!1}this.itemWidth=this.items.innerWidth(),this.leftHide=this.items.first().offset().left,this.rightHide=i(window).width()-this.leftHide,this.leftHide+=this.itemWidth,this.fixer(),this.pagination.hide(),this.items.hide(),this.startSlider()},startSlider:function(){var t=this,e=t.config,n=t.pagination,s=0,a=0,o=t.items,l=t.itemWidth;o.eq(e.visibleItems).prevAll().show(),this.items.css({position:"absolute",top:0}),e.sliderStartAnimate===!0?(this.items.css({left:this.rightHide}),i(o).filter(":visible").each(function(){i(this).stop().animate({left:s+a},{duration:e.sliderStartSpeed,specialEasing:{left:e.sliderStartEasing},done:function(){i(e.paginationPrev,n).addClass("disabled"),n.fadeIn("fast")}}),s+=l,a+=e.itemMargin})):(this.items.slice(e.visibleItems,this.itemsLength).css({left:this.rightHide}),i(o).filter(":visible").each(function(){i(this).css({left:s+a}),i(e.paginationPrev,n).addClass("disabled"),n.fadeIn("fast"),s+=l,a+=e.itemMargin})),e.keyboardArrows===!0&&i(document).keydown(function(i){switch(parseInt(i.keyCode)){case 39:t.goTo("next",e.paginationNext,i);break;case 37:t.goTo("prev",e.paginationPrev,i)}}),i(e.paginationNext,n).click(function(i){t.goTo("next",this,i)}),i(e.paginationPrev,n).click(function(i){t.goTo("prev",this,i)}),e.touch===!0&&t.swipe(this.element[0],function(i,n){switch(i){case"left":t.goTo("next",e.paginationNext,n);break;case"right":t.goTo("prev",e.paginationPrev,n)}})},goTo:function(t,e){var n=this,s=n.items;if(n.lastPos=this.items.filter(":visible:last").position().left,n.getPaginationClickable()===!1||i(e,n.config.pagination).hasClass("disabled"))return!1;if("prev"==t){i(n.config.paginationNext,n.pagination).removeClass("disabled");var a=s.filter(":visible:first"),o=a.prevAll(n.config.item).length;1>=o?i(e,n.config.pagination).addClass("disabled"):i(e,n.config.pagination).removeClass("disabled")}else if("next"==t){i(n.config.paginationPrev,n.pagination).removeClass("disabled");var l=s.filter(":visible:last"),r=l.nextAll(n.config.item).length;1>=r?i(e,n.config.pagination).addClass("disabled"):i(e,n.config.pagination).removeClass("disabled")}n.setPaginationClickable(!1),i(s).filter(":visible").each(function(e,s){if("prev"==t)switch(e){case n.config.visibleItems-1:n.firstPos=n.rightHide;break;case n.config.visibleItems-2:n.firstPos=n.lastPos;break;default:n.firstPos=i(s).position().left+n.itemWidth+n.config.itemMargin}else if("next"==t)switch(e){case 0:n.firstPos=-n.leftHide-n.config.itemMargin;break;case 1:n.firstPos=0;break;default:n.firstPos=i(s).position().left-n.itemWidth-n.config.itemMargin}i(s).stop().animate({left:n.firstPos},{duration:0===e?n.config.sliderSpeed:n.config.sliderSpeed,specialEasing:{left:n.config.sliderEasing},done:function(){"prev"==t?e===n.config.visibleItems-1&&i(s).hide("0",function(){n.setPaginationClickable(!0)}):"next"==t&&0===e&&i(s).hide("0",function(){n.setPaginationClickable(!0)})}})}),"prev"==t?a.prev().show():l.next().show(),i("prev"==t?a.prev():l.next()).stop().animate({left:"prev"==t?0:l.position().left},{duration:n.config.sliderSpeed,specialEasing:{left:n.config.sliderEasing},complete:function(){}})},setPaginationClickable:function(i){this.paginationClickable=i},getPaginationClickable:function(){return this.paginationClickable},fixer:function(){var t=this;i(window).on("resize",function(){t.leftHide=t.items.filter(":visible").first().offset().left,t.rightHide=i(window).width()-t.leftHide,t.leftHide+=t.itemWidth,t.items.filter(":visible").first().prevAll(t.config.item).css({left:-t.leftHide}),t.items.filter(":visible").last().nextAll(t.config.item).css({left:t.rightHide}),t.config.width="100%"==t.config.width||"auto"==t.config.width?i(document).width():t.config.width,i(t.containerDiv).css({width:t.config.width})})},swipe:function(i,t){var e,n,s,a,o,l,r,f=i,g=150,d=100,h=300,c=t||function(){};f.addEventListener("touchstart",function(i){var t=i.changedTouches[0];e="none",n=t.pageX,s=t.pageY,r=(new Date).getTime()},!1),f.addEventListener("touchmove",function(){},!1),f.addEventListener("touchend",function(i){var t=i.changedTouches[0];a=t.pageX-n,o=t.pageY-s,l=(new Date).getTime()-r,h>=l&&(Math.abs(a)>=g&&Math.abs(o)<=d?e=0>a?"left":"right":Math.abs(o)>=g&&Math.abs(a)<=d&&(e=0>o?"up":"down")),c(e,i)},!1)}}}(jQuery);
